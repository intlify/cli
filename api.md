# @intlify/cli API References

## Table Of Contents

- [Function](#function)
  - [annotate](#annotate)
  - [compile](#compile)
  - [format](#format)
- [Interface](#interface)
  - [AnnotateOptions](#annotateoptions)
  - [CompileOptions](#compileoptions)
  - [FormatOptions](#formatoptions)
  - [SFCParseError](#sfcparseerror)
- [Enum](#enum)
  - [AnnotateWarningCodes](#annotatewarningcodes)
  - [CompileErrorCodes](#compileerrorcodes)
- [Variable](#variable)
  - [DEFAULT_PRETTIER_OPTIONS](#default_prettier_options)
- [Class](#class)
  - [FormatLangNotFoundError](#formatlangnotfounderror)
  - [SFCAnnotateError](#sfcannotateerror)

## Function

### annotate

Annoate the Vue SFC block

**Signature:**
```typescript
declare function annotate(source: string, filepath: string, options?: AnnotateOptions): Promise<string>;
```

#### Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| source | string | The source code of the Vue SFC |
| filepath | string | The file path of the Vue SFC |
| options | AnnotateOptions | The [options](#annotateoptions) of the annotate function |

#### Returns

 The annotated source code of the Vue SFC

### compile

Compile i18n resources

**Signature:**
```typescript
declare function compile(source: string, output: string, options?: CompileOptions): Promise<boolean>;
```

#### Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| source | string | the i18n resource source path, you can use glob pattern |
| output | string | the compiled i18n resource output path |
| options | CompileOptions | [CompileOptions](#compileoptions) |

#### Returns

 `true` when all i18n resource successfuly compile, not `false`

#### Remarks

This functoin is **asyncronous** function. If you want to get about error details, use the handler of [CompileOptions](#compileoptions) and [CompileErrorCodes](#compileerrorcodes)

### format

Format the Vue SFC block

**Signature:**
```typescript
declare function format(source: string, filepath: string, options?: FormatOptions): Promise<string>;
```

#### Parameters

| Parameter | Type | Description |
| --- | --- | --- |
| source | string | The source code of the Vue SFC |
| filepath | string | The file path of the Vue SFC |
| options | FormatOptions | The [options](#formatoptions) of the format function |

#### Returns

 The formatted source code of the Vue SFC

#### Remarks

Currently, only i18n custom blocks supporting


## Interface

### AnnotateOptions

Annotate options of [annotate](#annotate) function

**Signature:**
```typescript
interface AnnotateOptions 
```


#### Properties

##### attrs

The Attributes to be annotated on the block tag

**Signature:**
```typescript
attrs?: Record<string, any>;
```

#### Remarks

default as `{}`

##### force

Whether to force annotations

**Signature:**
```typescript
force?: boolean;
```

#### Remarks

Force annotation of the attribute values of `attrs` option to the block tag. Even if the actual `lang` of the block content in the `lang` attribute is different, it will be enforced if this flag is turned on. default as `false`

##### onWarn

The warning handler

**Signature:**
```typescript
onWarn?: (code: number, args: Record<string, any>, block: SFCBlock) => void;
```

#### Remarks

Notify warnings generated by the annotate process

##### type

The type of the block

**Signature:**
```typescript
type?: string;
```

#### Remarks

Only `i18n` type is supported, if you don't specify it. If any other type is specified, the function will raise the [SFCAnnotateError](#sfcannotateerror).

default as `i18n`

##### vue

The Vue template compiler version

**Signature:**
```typescript
vue?: number;
```

#### Remarks

The version of the Vue template to be parsed by the annotate function. If `2` is specified, the `vue-template-compiler` used by Vue 2 is used; if `3` is specified, the `@vue/compiler-sfc` used by Vue 3 is used. defalt as `3`


### CompileOptions

Compile Options

**Signature:**
```typescript
interface CompileOptions 
```

#### Remarks

This optioins is used at [compile](#compile) function


#### Properties

##### ast

Whether to generate AST format

**Signature:**
```typescript
ast?: boolean;
```

#### Remarks

default `false`, it will output the function format.

##### mode

Compile mode

**Signature:**
```typescript
mode?: DevEnv;
```

#### Remarks

The mode of code generation. Default `production` for optimization. If `development`, code generated with meta information from i18n resources.

##### onCompile

Compile handler

**Signature:**
```typescript
onCompile?: (source: string, output: string) => void;
```

##### onError

Compile Error handler

**Signature:**
```typescript
onError?: (code: number, source: string, output: string, msg?: string) => void;
```


### FormatOptions

Format options of [format](#format) function

**Signature:**
```typescript
interface FormatOptions 
```


#### Properties

##### prettier

The prettier options

**Signature:**
```typescript
prettier?: Options;
```

#### Remarks

The options for formatting the content of `i18n` custom blocks with prettier default as [DEFAULT_PRETTIER_OPTIONS](#default_prettier_options)

##### vue

The Vue template compiler version

**Signature:**
```typescript
vue?: number;
```

#### Remarks

The version of the Vue template to be parsed by the annotate function. If `2` is specified, the `vue-template-compiler` used by Vue 2 is used; if `3` is specified, the `@vue/compiler-sfc` used by Vue 3 is used. defalt as `3`


### SFCParseError

Vue SFC compiler error

**Signature:**
```typescript
interface SFCParseError extends SyntaxError 
```

#### Remarks

This is the error wrapping the error that occurred in Vue SFC compiler


#### Properties

##### erorrs

The error that occurred in Vue SFC compiler

**Signature:**
```typescript
erorrs: CompilerError[];
```

##### filepath

The filepath of the source file

**Signature:**
```typescript
filepath: string;
```



## Enum

### AnnotateWarningCodes

Annotate Warning Codes

**Signature:**
```typescript
declare const enum AnnotateWarningCodes 
```

#### Members

| Member | Value| Description |
| --- | --- | --- |
| LANG_MISMATCH_IN_ATTR_AND_CONTENT | 4 | Lang mismatch `lang` and block content |
| LANG_MISMATCH_IN_OPTION_AND_CONTENT | 3 | Lang mismatch option and block content |
| LANG_MISMATCH_IN_SRC_AND_CONTENT | 2 | Lang mismatch block `src` and block content |
| NOT_SUPPORTED_TYPE | 1 | Not supported type |

#### Remarks

The warning codes of [annotate](#annotate) function

### CompileErrorCodes

Compile Error Codes

**Signature:**
```typescript
declare const enum CompileErrorCodes 
```

#### Members

| Member | Value| Description |
| --- | --- | --- |
| INTERNAL_COMPILE_ERROR | 3 | Internal compile error |
| INTERNAL_COMPILE_WARNING | 2 | Internal compile warning |
| NOT_SUPPORTED_FORMAT | 1 | Not supported format |

#### Remarks

The error codes of [compile](#compile) function


## Variable

### DEFAULT_PRETTIER_OPTIONS

The default prettier options for formatting the content of `i18n` custom blocks

**Signature:**
```typescript
DEFAULT_PRETTIER_OPTIONS: {
    printWidth: number;
    tabWidth: number;
    jsonRecursiveSort: boolean;
    plugins: string[];
}
```


## Class

### FormatLangNotFoundError

Fortmat lang fwnot found error

**Signature:**
```typescript
declare class FormatLangNotFoundError extends Error 
```

### Remarks

The error that not specified `lang` attribute in `i18n` custom block


#### Constructor

Constructor

**Signature:**
```typescript
constructor(message: string, filepath: string);
```

*Parameters*

| Parameter | Type | Description |
| --- | --- | --- |
| message | string | The error message |
| filepath | string | The filepath of the target file at formatting processing |


#### Properties

##### filepath

The filepath of the target file at formatting processing

**Signature:**
```typescript
filepath: string;
```


### SFCAnnotateError

The Annocation error

**Signature:**
```typescript
declare class SFCAnnotateError extends Error 
```


#### Constructor

Constructor

**Signature:**
```typescript
constructor(message: string, filepath: string);
```

*Parameters*

| Parameter | Type | Description |
| --- | --- | --- |
| message | string | The error message |
| filepath | string | The filepath of the target file at annotate processing |


#### Properties

##### filepath

The filepath of the target file at annotate processing

**Signature:**
```typescript
filepath: string;
```



